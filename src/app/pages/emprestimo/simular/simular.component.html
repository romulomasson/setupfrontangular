<div class="container-fluid">
    <app-page-title title="Empréstimo" [breadcrumbItems]="breadCrumbItems"></app-page-title>
    <div class="row">
        <div class="col-lg-12">
            <div class="card">
                <div class="card-body">
                    <h4 class="card-title mb-4">Simular</h4>

                    <form [formGroup]="emprestimoForm">
                        <div class="card">
                            <div class="card-body">
                                <div class="text-center">
                                    <div>
                                        <div class="mb-4 me-3">
                                            <i class="mdi mdi-account-circle text-primary h1"></i>
                                        </div>

                                        <div>
                                            <h5 class="">Olá {{ nomeFuncionario }}</h5>
                                            <p class="text-muted mb-1">De quanto você precisa? (R$)</p>
                                            <div class="col-md-6 mx-auto d-flex align-items-center flex-column">
                                                <div class="d-flex align-items-center">
                                                    <div class="input-group">
                                                        <span class="input-group-text rounded-start ">
                                                            <i class="fas fa-money-bill-wave text-success"></i>
                                                        </span>
                                                        <input type="text" class="form-control square-input rounded-end"
                                                            id="formrow-firstname-input" placeholder=""
                                                            mask="separator.2" thousandSeparator="."
                                                            decimalSeparator="," formControlName="valorEmprestimo">
                                                    </div>
                                                </div>
                                                <ngx-slider [value]="valorEmprestimo" [options]="option1"
                                                    (valueChange)="onSliderValueChange($event)"></ngx-slider>
                                                <div>
                                                    <button type="button" *ngIf="!exibeParcelas" class="btn btn-primary btn-lg" (click)="simular()">Simular</button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="row" *ngIf="exibeParcelas" >
                            <div class="col-xl-3 col-md-6" *ngFor="let item of lists">
                                <div class="card">
                                    <div class="card-body">
                                        <div class="d-flex align-items-center mb-3">
                                            <div class="avatar-xs me-3">
                                                <span
                                                    class="avatar-title rounded-circle bg-success-subtle text-success font-size-18">
                                                    <i class="bx bx-money"></i>
                                                </span>
                                            </div>
                                            <h5 class="font-size-14 mb-0">{{ item.prazoEmMeses }} Meses</h5>
                                        </div>
                                        <div class="col-lg-6 d-flex justify-content-center w-100">
                                            <div class="text-muted mt-3">
                                                <h4 class="text-center">{{ formatarComoReal(valorEmprestimo) }}</h4>
                                                <p class="text-center mb-0">em:</p>
                                                <h1>{{ item.prazoEmMeses }}x de {{ calcularValorMensal(valorEmprestimo,
                                                    item.taxaAoMes, item.prazoEmMeses) }}</h1>
                                                <p class="text-center mb-0">Taxa: {{ item.taxaAoMes }}% a.m</p>
                                            </div>
                                        </div>
                                        <div class="mt-4 pt-1">
                                            <a class="btn btn-soft-success d-block"
                                                (click)="openContratar(item)">Contratar</a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>

    </div>
</div>